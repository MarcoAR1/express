{"version":3,"sources":["component/Filter.jsx","component/Notification.jsx","services/phonebook.jsx","component/PersonForm.jsx","component/Persons.jsx","App.jsx","index.js"],"names":["Filter","setFilter","filter","onChange","event","test","target","value","Notification","message","error","className","baseUrl","GetInicialPersons","a","axios","get","data","CreateNewPersons","post","request","DeletePersons","id","delete","UpdatePersons","put","PersonForm","persons","setPersons","notification","useState","newName","setNewName","newNumber","setNewNumber","resetFields","replaceContact","contact_id","contact","fixNewName","split","e","join","window","confirm","then","res","prevPersons","concat","catch","err","response","alert","onSubmit","console","log","preventDefault","name","replace","m","toUpperCase","number","find","toLowerCase","pattern","title","Persons","RegExp","map","onClick","person_id","handleDeletePerson","App","setMessage","setTimeout","useEffect","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d3c226e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ setFilter, filter }) => {\r\n  const handleSearch = (event) => {\r\n    const test = /^[A-Za-z0-9\\s_-]+$/g.test(event.target.value);\r\n    test ? setFilter(event.target.value) : setFilter(event.target.value);\r\n  };\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input onChange={handleSearch} value={filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\nimport \"../style/Notification.css\";\r\n\r\nconst Notification = ({ message = \"\", error = false }) => {\r\n  return (\r\n    <>\r\n      {message ? (\r\n        <div className={error ? \"error\" : \"success\"}>{message}</div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\nexport const GetInicialPersons = async () => {\r\n  const data = await axios.get(baseUrl);\r\n  return data.data;\r\n};\r\n\r\nexport const CreateNewPersons = async (data) => {\r\n  const request = await axios.post(baseUrl, data);\r\n  return request;\r\n};\r\n\r\nexport const DeletePersons = async (id) => {\r\n  const request = await axios.delete(`${baseUrl}/${id}`);\r\n  return request.data;\r\n};\r\n\r\nexport const UpdatePersons = async (id, data) => {\r\n  const request = await axios.put(`${baseUrl}/${id}`, data);\r\n  return request;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { CreateNewPersons, UpdatePersons } from \"../services/phonebook\";\r\n\r\nconst PersonForm = ({ persons, setPersons, notification }) => {\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const handleChangeName = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n  const resetFields = () => {\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n  const handleChangeNumber = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSumit = (event) => {\r\n    const fixNewName = newName\r\n      .split(\" \")\r\n      .filter((e) => e)\r\n      .join(\" \");\r\n    console.log(fixNewName);\r\n    event.preventDefault();\r\n    if (fixNewName && newNumber) {\r\n      const contact = {\r\n        name: fixNewName.replace(/(^\\w|\\s\\w)/g, (m) => m.toUpperCase()),\r\n        number: newNumber,\r\n      };\r\n      const find = persons.find(\r\n        ({ name }) => name.toLowerCase() === fixNewName.toLowerCase()\r\n      );\r\n      find\r\n        ? replaceContact(find.id, contact)\r\n        : CreateNewPersons(contact)\r\n            .then((data) => {\r\n              setPersons((prevPersons) => {\r\n                return [...prevPersons, data.data];\r\n              });\r\n              notification(`Added ${data.data.name}`);\r\n              resetFields();\r\n            })\r\n            .catch((err) => notification(`${err.response.data.error}`, true));\r\n    } else {\r\n      fixNewName\r\n        ? alert(\"Please, fill in the missing field number.\")\r\n        : alert(\"Please, fill in the missing field name.\");\r\n    }\r\n  };\r\n\r\n  const replaceContact = (contact_id, contact) => {\r\n    const fixNewName = newName\r\n      .split(\" \")\r\n      .filter((e) => e)\r\n      .join(\" \");\r\n    window.confirm(\r\n      `${fixNewName} is already added to phonebook, replace the old number with a new one?`\r\n    )\r\n      ? UpdatePersons(contact_id, contact)\r\n          .then((res) => {\r\n            const { data } = res;\r\n            setPersons((prevPersons) => {\r\n              return [...prevPersons]\r\n                .filter(({ id }) => {\r\n                  return id !== data.id;\r\n                })\r\n                .concat(data);\r\n            });\r\n            notification(`Information of ${fixNewName} has replace successful`);\r\n            resetFields();\r\n          })\r\n          .catch((err) => {\r\n            notification(`${err.response.data.error}`, true);\r\n          })\r\n      : alert(\"Ok,Don`t update contact.\");\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSumit}>\r\n      <div>\r\n        name:\r\n        <input\r\n          onChange={handleChangeName}\r\n          value={newName}\r\n          pattern=\"^[A-Za-z\\s0-9_-]+$\"\r\n          title=\"Only number, _- and letter.\"\r\n        />\r\n      </div>\r\n      <div>\r\n        number:\r\n        <input\r\n          onChange={handleChangeNumber}\r\n          value={newNumber}\r\n          pattern=\"^[0-9+\\s_-]+$\"\r\n          title=\"Only  _- and number.\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\nimport { DeletePersons } from \"../services/phonebook\";\r\n\r\nconst Persons = ({ persons, filter, setPersons, notification }) => {\r\n  const handleDeletePerson = (person_id, name) => {\r\n    window.confirm(`Are you sure?\\n you want delete to ${name}?`)\r\n      ? DeletePersons(person_id)\r\n          .then(() => {\r\n            notification(`Successful delete ${name}.`);\r\n            setPersons((prevPersons) => {\r\n              return [...prevPersons].filter(({ id }) => id !== person_id);\r\n            });\r\n          })\r\n          .catch(() => {\r\n            notification(`${name} has been previously deleted.`, true);\r\n          })\r\n      : alert(\"Ok, don`t delete\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {persons\r\n        .filter(({ name }) => RegExp(`^${filter}`, \"i\").test(name))\r\n        .map(({ name, number, id }) => {\r\n          return (\r\n            <p key={id}>\r\n              {name} {number}\r\n              <button onClick={() => handleDeletePerson(id, name)}>\r\n                delete\r\n              </button>\r\n            </p>\r\n          );\r\n        })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./component/Filter\";\r\nimport Notification from \"./component/Notification\";\r\nimport PersonForm from \"./component/PersonForm\";\r\nimport Persons from \"./component/Persons\";\r\nimport { GetInicialPersons } from \"./services/phonebook.jsx\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [message, setMessage] = useState({});\r\n  const notification = (message, error = false) => {\r\n    setMessage({\r\n      message: message,\r\n      error: error,\r\n    });\r\n    setTimeout(() => {\r\n      setMessage({});\r\n    }, 2000);\r\n  };\r\n  useEffect(() => {\r\n    GetInicialPersons().then((persons) => {\r\n      setPersons(persons);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message.message} error={message.error} />\r\n      <Filter setFilter={setFilter} filter={filter} />\r\n      <h2>Add a new</h2>\r\n      <PersonForm\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        notification={notification}\r\n      />\r\n      <h2>Numbers</h2>\r\n      {persons.length ? (\r\n        <Persons\r\n          filter={filter}\r\n          persons={persons}\r\n          setPersons={setPersons}\r\n          notification={notification}\r\n        />\r\n      ) : (\r\n        \"Loading...\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}